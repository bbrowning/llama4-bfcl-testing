# Llama 4 tool call testing with Berkeley Function Calling Leaderboard

This repository has results comparing Llama 4 results on the Berkeley Function Calling Leaderboard tests as run via the meta-llama/llama-stack-evals project. We run with its `bfclv3` and `bfclv3-api` configurations, which test doing client-side prompting and parsing compared to server-side chat templates and tool call parsers.

The test setup is using vLLM 0.8.5.post1, sometimes with a custom tool call parser.


## bfclv3 results

```
                                                    RedHatAI/Llama-4-Scout-17B-16E-Instruct-FP8-dynamic                                                     
┏━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Benchmark ID ┃ Subset                            ┃ Result                                                                                                ┃
┡━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩
│ bfclv3       │ Overall                           │ {"accuracy": 0.6514298581400585, "num_correct": 2893.0, "num_incorrect": 1548.0, "num_total": 4441.0} │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ total_overall_accuracy            │ {"accuracy": 0.544039291179229, "num_total": 4441.0}                                                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ summary_ast_non_live              │ {"accuracy": 0.8091666666666666, "num_total": 1150.0}                                                 │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ simple_ast_non_live               │ {"accuracy": 0.7916666666666666, "num_total": 550.0}                                                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ multiple_ast_non_live             │ {"accuracy": 0.92, "num_correct": 184.0, "num_incorrect": 16.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ parallel_ast_non_live             │ {"accuracy": 0.765, "num_correct": 153.0, "num_incorrect": 47.0, "num_total": 200.0}                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ parallel_multiple_ast_non_live    │ {"accuracy": 0.76, "num_correct": 152.0, "num_incorrect": 48.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ overall_accuracy_live             │ {"accuracy": 0.7347845402043536, "num_total": 2251.0}                                                 │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ python_simple_ast_live            │ {"accuracy": 0.810077519379845, "num_correct": 209.0, "num_incorrect": 49.0, "num_total": 258.0}      │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ python_multiple_ast_live          │ {"accuracy": 0.7236467236467237, "num_correct": 762.0, "num_incorrect": 291.0, "num_total": 1053.0}   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ python_parallel_ast_live          │ {"accuracy": 0.6875, "num_correct": 11.0, "num_incorrect": 5.0, "num_total": 16.0}                    │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ python_parallel_multiple_ast_live │ {"accuracy": 0.6666666666666666, "num_correct": 16.0, "num_incorrect": 8.0, "num_total": 24.0}        │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ overall_accuracy_multi_turn       │ {"accuracy": 0.08, "num_total": 800.0}                                                                │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ multi_turn_base                   │ {"accuracy": 0.09, "num_correct": 18.0, "num_incorrect": 182.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ multi_turn_miss_func              │ {"accuracy": 0.08, "num_correct": 16.0, "num_incorrect": 184.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ multi_turn_miss_param             │ {"accuracy": 0.095, "num_correct": 19.0, "num_incorrect": 181.0, "num_total": 200.0}                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ multi_turn_long_context           │ {"accuracy": 0.055, "num_correct": 11.0, "num_incorrect": 189.0, "num_total": 200.0}                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ total_relevance                   │ {"accuracy": 0.8888888888888888, "num_correct": 16.0, "num_incorrect": 2.0, "num_total": 18.0}        │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3       │ total_irrelevance                 │ {"accuracy": 0.7878117913832199, "num_total": 1122.0}                                                 │
└──────────────┴───────────────────────────────────┴───────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

For more details, see the [raw results](results/RedHatAI-Llama-4-Scout-17B-16E-Instruct-FP8-dynamic/bfclv3-20250527-1307).


## bfclv3-api results with llama4_pythonic tool parser (vLLM default)

```
                                                    RedHatAI/Llama-4-Scout-17B-16E-Instruct-FP8-dynamic                                                     
┏━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Benchmark ID ┃ Subset                            ┃ Result                                                                                                ┃
┡━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩
│ bfclv3-api   │ Overall                           │ {"accuracy": 0.6541319522630038, "num_correct": 2905.0, "num_incorrect": 1536.0, "num_total": 4441.0} │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ total_overall_accuracy            │ {"accuracy": 0.5506038427365615, "num_total": 4441.0}                                                 │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ summary_ast_non_live              │ {"accuracy": 0.83, "num_total": 1150.0}                                                               │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ simple_ast_non_live               │ {"accuracy": 0.71, "num_total": 550.0}                                                                │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multiple_ast_non_live             │ {"accuracy": 0.88, "num_correct": 176.0, "num_incorrect": 24.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ parallel_ast_non_live             │ {"accuracy": 0.875, "num_correct": 175.0, "num_incorrect": 25.0, "num_total": 200.0}                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ parallel_multiple_ast_non_live    │ {"accuracy": 0.855, "num_correct": 171.0, "num_incorrect": 29.0, "num_total": 200.0}                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ overall_accuracy_live             │ {"accuracy": 0.7365615282096846, "num_total": 2251.0}                                                 │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ python_simple_ast_live            │ {"accuracy": 0.8023255813953488, "num_correct": 207.0, "num_incorrect": 51.0, "num_total": 258.0}     │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ python_multiple_ast_live          │ {"accuracy": 0.671415004748338, "num_correct": 707.0, "num_incorrect": 346.0, "num_total": 1053.0}    │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ python_parallel_ast_live          │ {"accuracy": 0.625, "num_correct": 10.0, "num_incorrect": 6.0, "num_total": 16.0}                     │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ python_parallel_multiple_ast_live │ {"accuracy": 0.75, "num_correct": 18.0, "num_incorrect": 6.0, "num_total": 24.0}                      │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ overall_accuracy_multi_turn       │ {"accuracy": 0.07625, "num_total": 800.0}                                                             │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multi_turn_base                   │ {"accuracy": 0.125, "num_correct": 25.0, "num_incorrect": 175.0, "num_total": 200.0}                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multi_turn_miss_func              │ {"accuracy": 0.015, "num_correct": 3.0, "num_incorrect": 197.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multi_turn_miss_param             │ {"accuracy": 0.09, "num_correct": 18.0, "num_incorrect": 182.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multi_turn_long_context           │ {"accuracy": 0.075, "num_correct": 15.0, "num_incorrect": 185.0, "num_total": 200.0}                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ total_relevance                   │ {"accuracy": 0.7222222222222222, "num_correct": 13.0, "num_incorrect": 5.0, "num_total": 18.0}        │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ total_irrelevance                 │ {"accuracy": 0.8360260770975056, "num_total": 1122.0}                                                 │
└──────────────┴───────────────────────────────────┴───────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

For more details, see the [raw results](results/RedHatAI-Llama-4-Scout-17B-16E-Instruct-FP8-dynamic/bfclv3-api-llama4_pythonic-20250527-1705).


## bfclv3-api results with a custom Lark-grammar and tool parser

```
                                                    RedHatAI/Llama-4-Scout-17B-16E-Instruct-FP8-dynamic                                                     
┏━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Benchmark ID ┃ Subset                            ┃ Result                                                                                                ┃
┡━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩
│ bfclv3-api   │ Overall                           │ {"accuracy": 0.6719207385723936, "num_correct": 2984.0, "num_incorrect": 1457.0, "num_total": 4441.0} │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ total_overall_accuracy            │ {"accuracy": 0.5685928723036674, "num_total": 4441.0}                                                 │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ summary_ast_non_live              │ {"accuracy": 0.873125, "num_total": 1150.0}                                                           │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ simple_ast_non_live               │ {"accuracy": 0.7425, "num_total": 550.0}                                                              │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multiple_ast_non_live             │ {"accuracy": 0.93, "num_correct": 186.0, "num_incorrect": 14.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ parallel_ast_non_live             │ {"accuracy": 0.92, "num_correct": 184.0, "num_incorrect": 16.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ parallel_multiple_ast_non_live    │ {"accuracy": 0.9, "num_correct": 180.0, "num_incorrect": 20.0, "num_total": 200.0}                    │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ overall_accuracy_live             │ {"accuracy": 0.7481119502443359, "num_total": 2251.0}                                                 │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ python_simple_ast_live            │ {"accuracy": 0.813953488372093, "num_correct": 210.0, "num_incorrect": 48.0, "num_total": 258.0}      │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ python_multiple_ast_live          │ {"accuracy": 0.724596391263058, "num_correct": 763.0, "num_incorrect": 290.0, "num_total": 1053.0}    │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ python_parallel_ast_live          │ {"accuracy": 0.75, "num_correct": 12.0, "num_incorrect": 4.0, "num_total": 16.0}                      │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ python_parallel_multiple_ast_live │ {"accuracy": 0.75, "num_correct": 18.0, "num_incorrect": 6.0, "num_total": 24.0}                      │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ overall_accuracy_multi_turn       │ {"accuracy": 0.0875, "num_total": 800.0}                                                              │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multi_turn_base                   │ {"accuracy": 0.115, "num_correct": 23.0, "num_incorrect": 177.0, "num_total": 200.0}                  │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multi_turn_miss_func              │ {"accuracy": 0.015, "num_correct": 3.0, "num_incorrect": 197.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multi_turn_miss_param             │ {"accuracy": 0.11, "num_correct": 22.0, "num_incorrect": 178.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ multi_turn_long_context           │ {"accuracy": 0.11, "num_correct": 22.0, "num_incorrect": 178.0, "num_total": 200.0}                   │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ total_relevance                   │ {"accuracy": 0.7777777777777778, "num_correct": 14.0, "num_incorrect": 4.0, "num_total": 18.0}        │
├──────────────┼───────────────────────────────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────┤
│ bfclv3-api   │ total_irrelevance                 │ {"accuracy": 0.8072845804988662, "num_total": 1122.0}                                                 │
└──────────────┴───────────────────────────────────┴───────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

For more details, see the [raw results](results/RedHatAI-Llama-4-Scout-17B-16E-Instruct-FP8-dynamic/bfclv3-api-lark_pythonic-20250527-1428).
